---
title: DN42系列 0x00：开坑
date: 2020-02-09 10:00:00
tags: [DN42, 网络]
index_img: https://cdn.jsdelivr.net/gh/YukariChiba/blog@img/index_img/dn42-0x00.jpg
categories:
  - [学习, 不务正业]
  - [技术, 高端但没啥用, DN42]
---

> 本系列文章旨在记录搭建一个简易的 Overlay Network，并将其连接到 DN42 网络中的过程。

Niantic Project CN Network，简称 NIACNET，是本人接手学校某神秘社团后一直在规划建设的科（中）研（二）网络，用于校内外的成员接入和内部访问，同时也能连接校内外各个计算机和服务器。此网络将会包括一套从 DNS 到证书颁发机构的完整体系，覆盖从校内网到境外 VPS 的多个网络节点。

与此同时，我被安利了 [DN42](https://dn42.net/) —— 一个分布式的网络，由各个参与者利用闲置的设备，通过 VPN 等方式互联。这与 NIACNET 的想法想同，于是我立即开始着手在 DN42 的基础上构建自己的网络。

而将此网络扩展至 DN42，则需要建立更多的额外基础设施，例如运行 IGP/BGP 协议的节点和与运行维护相关的程序，因此需要一些准备。

## 前期准备

### 基础设施

由于接入的需要，至少需要一个长期具有稳定 IP 地址的设备，即使可以通过 P2P 等方法形成虚拟网络，也需要若干 VPS 的配合，同时为了进行跨境的连接，需要这些 VPS 能够分布在全球各地。

我在翻阅了自己的 VPS 列表后，腾出了两个分别位于美国东西两岸的 VPS 和一个位于罗马尼亚的 VPS，再加上最近部署的位于香港的 VPS，四者将共同形成境外部分的网络（同时也是涉及 DN42 的主要部分）。而大量位于国内的节点，由于带宽受限，再加上跨境连接困难，将被单独划分为中国区域，与我的各个终端设备相连。

### 域名

NIACNET 的公网部分，将沿用 `nia.ac.cn` 的域名，而在内网将使用 `.nia` 域名以进行区分。在 DN42 网络部分则会使用 `nia.dn42` 域名。

### 结构

很显然地，在国内带宽受限的状况下，最优的方案即是 P2P 直连，这样既不需要占用中转路由器的流量，也能最大化网络的带宽，最小化延迟（毕竟就十几个节点的网络不可能比正规的运营商优化得更好）。但是限于国内大环境的限制（CGN），可能并不能实现完全理想的 P2P 网络：部分节点的流量仍需转发，例如校内网。

然而，国内流量与国际流量应当被充分隔离，因为大流量的跨境通信可能会被限制。在 DN42 网络上，会使用标准的路由协议（OSPF，BGP）。

- - -

在完成上述规划后，即可进行 DN42 的注册和申请了。